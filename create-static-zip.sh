#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è ZIP –∞—Ä—Ö–∏–≤–∞ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–∞–π—Ç–æ–º
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./create-static-zip.sh

echo "üì¶ –°–æ–∑–¥–∞–Ω–∏–µ ZIP –∞—Ä—Ö–∏–≤–∞ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–∞–π—Ç–æ–º..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –µ—Å—Ç—å
if [ ! -d "out" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ø–∞–ø–∫–∞ out –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
    echo "   –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞: npm run build"
    exit 1
fi

# –ò–º—è –∞—Ä—Ö–∏–≤–∞
ZIP_NAME="blck-site-static.zip"

# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π –∞—Ä—Ö–∏–≤ –µ—Å–ª–∏ –µ—Å—Ç—å
if [ -f "$ZIP_NAME" ]; then
    echo "üóëÔ∏è  –£–¥–∞–ª—è—é —Å—Ç–∞—Ä—ã–π –∞—Ä—Ö–∏–≤..."
    rm "$ZIP_NAME"
fi

# –°–æ–∑–¥–∞–µ–º ZIP –∏–∑ –ø–∞–ø–∫–∏ out
echo "üóúÔ∏è  –°–æ–∑–¥–∞—é ZIP –∞—Ä—Ö–∏–≤..."
cd out
zip -r "../$ZIP_NAME" . -q
cd ..

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä
SIZE=$(du -h "$ZIP_NAME" | cut -f1)
echo ""
echo "‚úÖ –ê—Ä—Ö–∏–≤ —Å–æ–∑–¥–∞–Ω: $ZIP_NAME"
echo "üìä –†–∞–∑–º–µ—Ä: $SIZE"
echo ""
echo "üìã –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ:"
echo "  ‚úì out/ (–≤—Å–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã)"
echo "  ‚úì index.html (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)"
echo "  ‚úì –í—Å–µ HTML, CSS, JS —Ñ–∞–π–ª—ã"
echo ""
echo "üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:"
echo "   1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ $ZIP_NAME –Ω–∞ Host-0"
echo "   2. –†–∞—Å–ø–∞–∫—É–π—Ç–µ –≤ –ø–∞–ø–∫—É public_html –∏–ª–∏ www"
echo "   3. –ì–æ—Ç–æ–≤–æ! –°–∞–π—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ä–∞–∑—É"
echo ""
echo "‚úÖ –¢–µ–ø–µ—Ä—å –µ—Å—Ç—å index.html –∏ –≤—Å–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã!"
echo ""


